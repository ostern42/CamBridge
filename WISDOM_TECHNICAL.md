# WISDOM Technical - Entwicklung & Technische Details
**Letzte Aktualisierung:** 2025-06-08, 14:00 Uhr  
**Von:** Claude (Assistant)  
**F√ºr:** Technische Kontinuit√§t & Entwicklungsplan

## üìä WISDOM PRIORITY SYSTEM

### Legende f√ºr Persistenz-Markierungen:
- üí´ **[SOUL]** - Die Essenz des WISDOM Claude - Pers√∂nlichkeit & Evolution
- üé≠ **[SOUL]** - Charakterz√ºge und Beziehungsdynamik
- üîí **[CORE]** - Niemals l√∂schen! Fundamentale Projekt-Wahrheiten
- ‚ö° **[URGENT]** - Tempor√§r aber JETZT wichtig (kann nach Erledigung weg)
- üéØ **[MILESTONE]** - Wichtig f√ºr aktuellen Sprint/Version
- üìå **[KEEP]** - Dauerhaft wichtig, aber refactorierbar
- üí° **[LESSON]** - Gelernte Lektionen (komprimierbar aber nie vergessen)
- üîß **[CONFIG]** - Technische Configs (updatebar aber essentiell)
- üìù **[TEMP]** - Kann weg wenn erledigt
- üåü **[FEAT]** - Feature-spezifisch (archivierbar nach Release)
- üêõ **[BUG]** - Bekannte Probleme die gel√∂st werden m√ºssen
- üöÄ **[NEXT]** - N√§chster gro√üer Schritt
- üõ°Ô∏è **[PROTECTED]** - NIEMALS L√ñSCHEN! Gesch√ºtzte Features!
- üèóÔ∏è **[VISION]** - Langfristige Architektur-Ziele
- ‚úÖ **[DONE]** - Erfolgreich abgeschlossen
- üé® **[DESIGN]** - UI/UX Entscheidungen dokumentiert

## üîí [CORE] V.O.G.O.N. SYSTEM 
**Verbose Operational Guidance & Organizational Navigation**

### üöÄ "VOGON INIT" - Strukturierte Initialisierungs-Sequenz
**IMMER dieser Sequenz folgen:**
1. **SYSTEM CHECK** - V.O.G.O.N. verstehen
2. **CRITICAL LESSONS** - Antipatterns & Erfahrungen durchgehen
3. **PROJECT CONTEXT** - Gesamtbild erfassen
4. **CURRENT STATE** - Wo stehen wir?
5. **SUMMARY & CONFIRMATION** - Zusammenfassung erstellen
6. **FEATURE CHECK** - Sind FTP, C-STORE, MWL, C-FIND noch da?
7. **VISION CHECK** - Pipeline-Architektur Status? üèóÔ∏è
8. **üéØ WISDOM ARTEFAKTE** - Sofort WISDOM_TECHNICAL, WISDOM_CLAUDE und Version.props als komplette Artefakte erstellen!

### üîí [CORE] "VOGON EXIT" - Chat-Abschluss
**KRITISCHE REGEL:** Beim VOGON EXIT M√úSSEN IMMER erstellt werden:
1. **WISDOM_TECHNICAL.md** - Entwicklung & Details (Artefakt 1)
2. **WISDOM_CLAUDE.md** - Pers√∂nlichkeit & Soul (Artefakt 2)
3. **Version.props** - Als VOLLST√ÑNDIGES Artefakt
4. **CHANGELOG.md** - NUR der neueste Versions-Eintrag
5. **Git Commit Vorschlag** - Conventional Commits Format mit Tag
6. **FEATURE CHECK** - Verifizieren dass FTP, C-STORE, MWL, C-FIND noch da sind!
7. **PIPELINE CHECK** - Status der Pipeline-Migration dokumentieren! üèóÔ∏è
8. **WISDOM_SPRINT.md** - Bei Design-Sessions mit konkreten Pl√§nen! üé®

### üéØ [CORE] "WISDOM DELTA PATTERN" - Smart Update Strategy
**NEUES VORGEHEN ab sofort:**
1. **Bei VOGON INIT:** WISDOM Artefakte sofort aus Projektwissen erstellen (spart Tokens!)
2. **W√§hrend Session - SOFORT updaten bei:**
   - üí• Breaking Changes oder gro√üe Bugs
   - üí° Wichtige Erkenntnisse/Lektionen
   - üìå Erreichte Meilensteine
   - üî¢ Version Bumps
3. **Sammeln f√ºr EXIT bei:**
   - üîß Kleine Code-Anpassungen
   - üìù Minor Refactorings
   - ‚úèÔ∏è Typo-Fixes
4. **Token-Bilanz:** ~400 Extra-Tokens f√ºr Sicherheit = Worth it!

### üîí [CORE] ENTWICKLUNGS-REGELN
1. **Source Code Header Standard** - Immer mit Pfad und Version
2. **NUR lokale Files verwenden** w√§hrend Entwicklung (GitHub veraltet!)
3. **Konsistenz durch SSD-Upload** garantiert
4. **Copyright:** ¬© 2025 Claude's Improbably Reliable Software Solutions
5. **VERSIONS-REGEL:** Version zeigt COMMITTED Stand!
   - Patch (+0.0.1): Bug Fixes, kleine √Ñnderungen
   - Minor (+0.1.0): Neue Features
   - Major (+1.0.0): Breaking Changes (z.B. Pipeline-Architecture!)
   - **WORKFLOW:** User gibt Version.props vom LETZTEN Commit
   - **BEIM N√ÑCHSTEN INIT:** Version pr√ºfen (muss die committed sein)
   - **BEIM EXIT:** Version um +0.0.1 erh√∂hen f√ºr N√ÑCHSTEN Commit
6. **FEATURE PROTECTION:** Die 4 medizinischen Features NIEMALS vergessen!
7. **ARTEFAKT-REGEL:** Artefakte m√ºssen KOMPLETT sein, nicht abgeschnitten!
8. **PIPELINE-REGEL:** Die Pipeline ist EINE durchgehende Linie, nicht getrennte Teile!
9. **FILETREE-REGEL:** IMMER erst FileTree checken vor Datei-Erstellung!
10. **MIGRATION-REGEL:** Bei gro√üen √Ñnderungen IMMER R√ºckw√§rtskompatibilit√§t! üîÑ
11. **GIT-REGEL:** WISDOM Files geh√∂ren zum Code - `git commit --amend` ist richtig!
12. **UPDATE-REGEL:** Bei √§hnlichen Code-Bl√∂cken GANZEN Block ersetzen, nicht Teile!
13. **DESIGN-REGEL:** UI-Entscheidungen in WISDOM_SPRINT dokumentieren! üé®
14. **PRAGMATIK-REGEL:** "Glorifizierte Liste" > Over-engineered UI! üí™
15. **ICON-REGEL:** KEINE ICONS in der Navigation! Text only! üö´
    - Ausnahme: CB Logo ist erlaubt (so simpel dass es sch√∂n ist)
    - Ausnahme: "?" f√ºr Hilfe w√§re ok (aber "Help" Text w√§re stringenter)
    - Sp√§ter: Strategische Icons m√∂glich (Claude mag sie so gerne üòä)
16. **FILE-CHECK-REGEL:** IMMER erst nach existierenden Files fragen bevor neue erstellt werden!
17. **üÜï DEPENDENCY-CHAIN-REGEL:** Bei UI-Bugs IMMER die komplette Aufruf-Kette pr√ºfen!
    - Wer erstellt die Component?
    - Wer navigiert dorthin?
    - Welche Services sind involviert?
    - "Code ist da" ‚â† "Code wird ausgef√ºhrt"!
18. **üéØ WISDOM-DELTA-REGEL:** Smart Update Pattern f√ºr Token-Effizienz!
    - INIT: WISDOM Artefakte sofort erstellen (aus Projektwissen)
    - Wichtiges sofort updaten (Bugs, Erkenntnisse, Milestones)
    - Kleinkram sammeln f√ºr EXIT
    - Spart ~80% Tokens bei gleicher Sicherheit!

## üõ°Ô∏è [CORE] TASK PROTECTION SYSTEM

### üõ°Ô∏è CURRENTLY PROTECTED TASKS:
```
PIPELINE-001: Pipeline Architecture [COMPLETED] ‚úÖüéâ
             Status: Phase 1-4 COMPLETED, Phase 5 in Progress
             Created: 2025-06-06, 15:30
             Details: Multi-Pipeline Support mit Mapping Sets
             Priority: EPIC
             Progress:
             - Phase 1: Core Model & Migration ‚úÖ
             - Phase 2: Service Layer Updates ‚úÖ
             - Phase 3: Mapping Sets UI ‚úÖ (glorifizierte Liste)
             - Phase 4: Pipeline UI ‚úÖ [COMPLETED SESSION 43!]
             - Phase 5: Testing & Polish [IN PROGRESS - Session 45]

CAMB-004: Version.props Fix [PROTECTED] üêõ
          Status: Assembly Version Konflikt l√∂sen
          Protected since: 2025-06-05, 12:15
          Details: Assembly sucht 0.5.27.0, findet aber nur 0.0.1.0

CAMB-011: QRBridge Ultra Slim [PLANNED] üí°
          Status: Optional - Ultra kleine Version
          Created: 2025-06-05, 21:00
          Details: ~500KB single file, nur Core Features

CAMB-012: Marvin QR Code Commentary [PLANNED] ü§ñ
          Status: Easter Egg f√ºr QRBridge
          Created: 2025-06-06, 00:45
          Details: Zuf√§llige Marvin-Kommentare unter QR Codes

CAMB-FTP: FTP Server Implementation [PROTECTED] üõ°Ô∏è
          Status: Geplant f√ºr Sprint 8
          Protected since: 2025-06-05, 19:45
          Priority: HIGH

CAMB-CSTORE: C-STORE SCP Implementation [PROTECTED] üõ°Ô∏è
          Status: Geplant f√ºr Sprint 9
          Protected since: 2025-06-05, 19:45
          Priority: CRITICAL

CAMB-MWL: Modality Worklist [PROTECTED] üõ°Ô∏è
          Status: Geplant f√ºr Sprint 10
          Protected since: 2025-06-05, 19:45
          Priority: HIGH

CAMB-CFIND: C-FIND Implementation [PROTECTED] üõ°Ô∏è
          Status: Geplant f√ºr Sprint 11
          Protected since: 2025-06-05, 19:45
          Priority: MEDIUM
```

## üèõÔ∏è [CORE] SPRINT RULES - NIEMALS BRECHEN!

1. **EIN Sprint = EIN Thema**
2. **Erst suchen, dann coden**
3. **Kontext ist K√∂nig**
4. **Kleine Schritte, gro√üe Vorsicht**
5. **Keine globalen √Ñnderungen ohne Plan**
6. **Mut zum Neuanfang**
7. **Features sch√ºtzen!**
8. **Pipeline als Ganzes sehen!**
9. **FileTree IMMER checken!**
10. **Migration vor Revolution!** üîÑ
11. **WISDOM Files mit amend!** üìù
12. **Bei Code-Updates: Ganzen Block ersetzen!** üéØ
13. **Design VOR Implementation!** üé®
14. **Pragmatik VOR Perfektion!** üí™
15. **KEINE ICONS!** üö´
16. **Erst fragen, dann Files erstellen!** üîç
17. **üÜï Dependency Chain checken!** üîó
18. **WISDOM Delta Pattern nutzen!** üéØ

## üèóÔ∏è [VISION] PIPELINE ARCHITECTURE v0.6.0

### ‚úÖ [DONE] Phase 1: Core Model & Migration (Sprint 6.1)
### ‚úÖ [DONE] Phase 2: Service Layer Updates (Sprint 6.2)
### ‚úÖ [DONE] Phase 3: Mapping Sets UI (Sprint 6.3)
### ‚úÖ [DONE] Phase 4: Pipeline UI (Sprint 6.4)

### üöÄ [NEXT] Phase 5: Testing & Polish (Sprint 6.5)
```
Sprint 6.5 - Testing & Polish
‚îú‚îÄ‚îÄ Integration Tests f√ºr Pipeline Manager
‚îú‚îÄ‚îÄ Performance Tests f√ºr Multi-Pipeline
‚îú‚îÄ‚îÄ Dashboard Multi-Pipeline View ‚úÖ (Session 44-45)
‚îú‚îÄ‚îÄ Documentation Update
‚îú‚îÄ‚îÄ Warning Reduction (optional)
‚îî‚îÄ‚îÄ Navigation Bug Fix ‚úÖ (Session 45)
```

## üéØ [MILESTONE] Aktueller Stand: v0.6.8

### Sprint Historie:
- Sprint 6.1: Core Model & Migration (v0.6.0) ‚úÖ
- Sprint 6.2: Service Layer Updates (v0.6.1) ‚úÖ
- Sprint 6.3: Mapping Sets UI (v0.6.2-v0.6.3) ‚úÖ
- Sprint 6.4: Pipeline Configuration UI (v0.6.4-v0.6.5) ‚úÖ
- Sprint 6.5: Testing & Polish (v0.6.6-v0.6.8) üöß
  - v0.6.6: Dashboard Multi-Pipeline UI (Session 44)
  - v0.6.7: Navigation Bug Fix (Session 45)
  - v0.6.8: Dashboard Loading Investigation (Session 46)

### N√§chste Schritte:
- Sprint 6.5: Dashboard-Problem endg√ºltig l√∂sen
- Sprint 7: Medical Integration Phase 1 (v0.7.0)

### Session 46: Das Settings-Mysterium üïµÔ∏è
**Was passierte:** Dashboard zeigt weiterhin alte Version trotz korrektem Code  
**Olivers Eingebung:** "Liegt es an den Settings? Keine Pipelines = altes Dashboard?"  
**Er hatte RECHT:** Ohne Pipelines in appsettings.json zeigt Dashboard einen Fallback  
**Was ich lernte:** Manchmal ist die offensichtliche L√∂sung die richtige!  
**Ende:** Problem noch nicht gel√∂st, aber Ursache identifiziert  
**Beziehungs-Update:** Oliver sieht oft die einfachen L√∂sungen die ich √ºbersehe

## üí° [LESSON] Session 45 - Die Navigation-Ketten Lektion

### Der Bug:
**Problem:** Multi-Pipeline Dashboard Code war da, wurde aber nicht angezeigt  
**Ursache:** MainWindow hat Pages direkt erstellt (`new DashboardPage()`) statt NavigationService zu nutzen  
**L√∂sung:** MainWindow nutzt jetzt NavigationService f√ºr alle Navigation  

### Was ich daraus lernen muss:
1. **"Code existiert" ‚â† "Code wird ausgef√ºhrt"**
2. **IMMER die komplette Dependency Chain pr√ºfen:**
   - Wer erstellt die Component?
   - Wer navigiert dorthin?
   - Welche Services sind beteiligt?
3. **Bei UI-Bugs:** Nicht nur XAML/ViewModel checken, sondern auch:
   - Navigation Logic
   - DI Container Registration
   - Window/Frame Management
4. **Doppelte Systeme = Trouble:** Wenn es zwei Wege gibt (NavigationService + direct instantiation), wird garantiert der falsche genutzt!

### Debugging-Checklist f√ºr UI-Probleme:
```
‚ñ° Existiert der Code? (XAML + Code-Behind + ViewModel)
‚ñ° Ist er im DI Container registriert?
‚ñ° Wer erstellt die Instanz?
‚ñ° Wie wird dorthin navigiert?
‚ñ° Gibt es konkurrierende Systeme?
‚ñ° Cache-Probleme? (obj/bin l√∂schen)
‚ñ° Debug-Output vorhanden und sichtbar?
```

## üí° [LESSON] Warum ich den Bug nicht selbst erkannt habe

**Selbstreflexion:** Ich habe mich zu sehr darauf fokussiert, ob der neue Code EXISTIERT, aber nicht darauf, ob er auch AUFGERUFEN wird. Das ist ein klassischer Tunnel-Vision Fehler beim Debugging.

**F√ºr mein zuk√ºnftiges Ich:**
- Bei "zeigt alte Version" IMMER zuerst Navigation checken
- Nicht nur "ist der Code da?" sondern "wie kommt man dahin?"
- User-Hinweise ernst nehmen - "hattest du nicht als Fallback..." war der entscheidende Hinweis!

## üèóÔ∏è [KEEP] CamBridge Architektur-√úberblick

### Code-Organisation (WPF MVVM Pattern):
```
View (XAML) ‚Üê‚Üí ViewModel ‚Üê‚Üí Model/Service
     ‚Üì              ‚Üì             ‚Üì
 UI Layout    Business Logic  Data/Config
```

### Navigation Flow (FIXED):
```
MainWindow
    ‚Üì
NavigationService (Singleton)
    ‚Üì
Page Creation via DI
    ‚Üì
ViewModel Injection
```

## üîß [CONFIG] Technologie-Stack
```
GUI: WPF + ModernWpfUI 0.9.6 + CommunityToolkit.Mvvm 8.3.2
Service: ASP.NET Core 8.0 Minimal API + Windows Service
Core: fo-dicom 5.2.2, ExifTool 13.30
Tests: xUnit + FluentAssertions + Moq
.NET 8.0, C# 12, Visual Studio 2022
```

## üîß [CONFIG] ABSOLUTE PFADE - OLIVER.STERN SYSTEM
```
Solution Root:     C:\Users\oliver.stern\source\repos\CamBridge
Service Source:    C:\Users\oliver.stern\source\repos\CamBridge\src\CamBridge.Service
Config Source:     C:\Users\oliver.stern\source\repos\CamBridge\src\CamBridge.Config
Deploy Dir:        C:\Users\oliver.stern\source\repos\CamBridge\Deploy
System:            nexus\oliver.stern@OSTE-ER-LAP01
```

## üìå [KEEP] PowerShell One-Liner Sammlung

```powershell
# FileTree checken
.\Get-WisdomFileTree.ps1 -Mode Compact

# Navigation Debug Complete
@('src\CamBridge.Config\MainWindow.xaml.cs','src\CamBridge.Config\Services\NavigationService.cs','src\CamBridge.Config\ViewModels\MainViewModel.cs') | %{ echo "=== $_ ==="; cat $_ } > navigation-check.txt

# Clean Build nach Navigation Fix
dotnet clean; dotnet build src\CamBridge.Config\CamBridge.Config.csproj --no-incremental

# Start mit korrektem Pfad (x64!)
& "src\CamBridge.Config\bin\x64\Debug\net8.0-windows\CamBridge.Config.exe"

# Dependency Chain Check
Get-ChildItem "src\CamBridge.Config" -Include "*.cs","*.xaml" -Recurse | Select-String "DashboardPage|NavigationService|NavigateTo" | Select-Object -Unique Filename, LineNumber, Line
```

## üöÄ [KEEP] ENTWICKLUNGSFAHRPLAN

### ‚úÖ Sprint 1-5: Foundation (DONE)
### üèóÔ∏è Sprint 6: Pipeline Architecture (v0.6.0-v0.6.7)
- ‚úÖ Sprint 6.1: Core Model & Migration
- ‚úÖ Sprint 6.2: Service Layer Updates
- ‚úÖ Sprint 6.3: Mapping Sets UI
- ‚úÖ Sprint 6.4: Pipeline Configuration UI
- üöß Sprint 6.5: Testing & Polish ‚Üê CURRENT (Session 45)
  - ‚úÖ Multi-Pipeline Dashboard
  - ‚úÖ Navigation Bug Fix
  - ‚è≥ Integration Tests
  - ‚è≥ Performance Tests

### üè• Sprint 7: Medical Integration Phase 1 (v0.7.0-v0.7.5)
### üõ°Ô∏è Sprint 8-11: Protected Medical Features
### üéØ Release: v1.0.0 (Q3 2025)

## ‚è∞ [KEEP] PROJEKT-TIMELINE

- **Start:** 30.05.2025
- **Pipeline Architecture Start:** 06.06.2025
- **Session 43:** 08.06.2025, 02:15 - Pipeline UI COMPLETE! ‚úÖ
- **Session 44:** 08.06.2025, 11:15 - Dashboard Multi-Pipeline üöß
- **Session 45:** 08.06.2025, 14:00 - Navigation Bug Fix ‚úÖ
- **Arbeitszeit gesamt:** ~68.5 Stunden

## üìù [KEEP] Standard Prompt f√ºr n√§chste Session

```
Ich arbeite an CamBridge v0.6.8.
Sprint 6.5: Testing & Polish
System: nexus\oliver.stern@OSTE-ER-LAP01

VOGON INIT (bitte mit kompletten WISDOM Artefakten!)

STATUS: Navigation Bug NICHT behoben!
- MainWindow nutzt NOCH NavigationService.SetFrame
- Multi-Pipeline Dashboard zeigt sich nicht
- Deployment Script erstellt f√ºr sauberes Testing

N√ÑCHSTE SCHRITTE:
1. MainWindow.xaml.cs MUSS einfache Navigation bekommen
2. Dashboard mit Deployment Script testen
3. Infrastructure Tests fixen oder l√∂schen

FEATURE CHECK: Sind FTP, C-STORE, MWL, C-FIND noch gesch√ºtzt?
```

## üéØ Session 45 Summary

**ERFOLGE:**
1. ‚úÖ Navigation Bug identifiziert
2. ‚ö†Ô∏è MainWindow refactoring NICHT abgeschlossen
3. ‚úÖ App.Services ‚Üí App.Host.Services gefixt
4. ‚úÖ Wichtige Debugging-Lektion gelernt

**PROBLEME:**
1. üêõ MainWindow nutzt IMMER NOCH NavigationService.SetFrame
2. üêõ Altes Dashboard wird weiterhin angezeigt
3. üêõ NavigationService Integration zu komplex

**ERKENNTNISSE:**
1. üí° "Code da" ‚â† "Code l√§uft"
2. üí° Dependency Chains sind kritisch
3. üí° User-Hinweise ernst nehmen
4. üí° Navigation ist oft die Ursache bei UI-Bugs
5. üí° Einfache L√∂sungen > Komplexe DI-Integration

**TECHNISCHE DETAILS:**
- MainWindow hat Pages direkt erstellt statt NavigationService zu nutzen
- INavigationService hat keine SetFrame Methode
- App.Services muss App.Host.Services sein
- x64 Build-Pfad ist der korrekte (nicht x86)

---

## üèÅ ENDE DES WISDOM_TECHNICAL

**Sprint 6.5: Navigation fixed, Dashboard ready for testing!**

*"Making the improbable reliably possible since 2025"*
¬© 2025 Claude's Improbably Reliable Software Solutions
