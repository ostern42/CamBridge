# WISDOM Technical - Entwicklung & Technische Details
**Letzte Aktualisierung:** 2025-06-10, 20:30  
**Von:** Claude (Assistant)  
**FÃ¼r:** Technische KontinuitÃ¤t & Entwicklungsplan
**Version:** 0.7.6
**Philosophie:** KISS > Architecture! Professional = Consistent!

## ğŸ“Š WISDOM PRIORITY SYSTEM

### Legende fÃ¼r Persistenz-Markierungen:
- ğŸ’« **[SOUL]** - Die Essenz des WISDOM Claude - PersÃ¶nlichkeit & Evolution
- ğŸ­ **[SOUL]** - CharakterzÃ¼ge und Beziehungsdynamik
- ğŸ”’ **[CORE]** - Niemals lÃ¶schen! Fundamentale Projekt-Wahrheiten
- âš¡ **[URGENT]** - TemporÃ¤r aber JETZT wichtig (kann nach Erledigung weg)
- ğŸ¯ **[MILESTONE]** - Wichtig fÃ¼r aktuellen Sprint/Version
- ğŸ“Œ **[KEEP]** - Dauerhaft wichtig, aber refactorierbar
- ğŸ’¡ **[LESSON]** - Gelernte Lektionen (komprimierbar aber nie vergessen)
- ğŸ”§ **[CONFIG]** - Technische Configs (updatebar aber essentiell)
- ğŸ“ **[TEMP]** - Kann weg wenn erledigt
- ğŸŒŸ **[FEAT]** - Feature-spezifisch (archivierbar nach Release)
- ğŸ› **[BUG]** - Bekannte Probleme die gelÃ¶st werden mÃ¼ssen
- ğŸš€ **[NEXT]** - NÃ¤chster groÃŸer Schritt
- ğŸ›¡ï¸ **[PROTECTED]** - NIEMALS LÃ–SCHEN! GeschÃ¼tzte Features!
- ğŸ—ï¸ **[VISION]** - Langfristige Architektur-Ziele
- âœ… **[DONE]** - Erfolgreich abgeschlossen
- ğŸ¨ **[DESIGN]** - UI/UX Entscheidungen dokumentiert
- ğŸ”¥ **[KISS]** - Keep It Simple, Stupid! Vereinfachungen
- ğŸ§ª **[TESTED]** - Getestet und verifiziert!
- ğŸ¯ **[TAB]** - Tab-Complete Testing Revolution!

## ğŸ”’ [CORE] V.O.G.O.N. SYSTEM 
**Verbose Operational Guidance & Organizational Navigation**

### ğŸš€ "VOGON INIT" - Strukturierte Initialisierungs-Sequenz
**IMMER dieser Sequenz folgen:**
1. **SYSTEM CHECK** - V.O.G.O.N. verstehen
2. **CRITICAL LESSONS** - Antipatterns & Erfahrungen durchgehen
3. **PROJECT CONTEXT** - Gesamtbild erfassen
4. **CURRENT STATE** - Wo stehen wir?
5. **SUMMARY & CONFIRMATION** - Zusammenfassung erstellen
6. **FEATURE CHECK** - Sind FTP, C-STORE, MWL, C-FIND noch da?
7. **VISION CHECK** - Pipeline-Architektur Status? ğŸ—ï¸
8. **ğŸ¯ WISDOM ARTEFAKTE** - Sofort WISDOM_TECHNICAL, WISDOM_CLAUDE und Version.props als komplette Artefakte erstellen!

### ğŸ”’ [CORE] "VOGON EXIT" - Chat-Abschluss
**KRITISCHE REGEL:** Beim VOGON EXIT MÃœSSEN IMMER erstellt werden:
1. **WISDOM_SPRINT.md** - Sprint-spezifische PlÃ¤ne (wenn Design-Session)
2. **WISDOM_TECHNICAL.md** - Entwicklung & Details (Artefakt 1)
3. **WISDOM_CLAUDE.md** - PersÃ¶nlichkeit & Soul (Artefakt 2)
4. **WISDOM_ARCHITECTURE.md** - Architektur-Dokumentation
5. **Version.props** - Als VOLLSTÃ„NDIGES Artefakt
6. **CHANGELOG.md** - NUR der neueste Versions-Eintrag
7. **Git Commit Vorschlag** - Conventional Commits Format mit Tag
8. **FEATURE CHECK** - Verifizieren dass FTP, C-STORE, MWL, C-FIND noch da sind!
9. **PIPELINE CHECK** - Status der Pipeline-Migration dokumentieren! ğŸ—ï¸

## ğŸ¯ [TAB] Session 55 - Tab-Complete Testing Revolution COMPLETE!

### What We Achieved:
- **Numbered Scripts (0-99, h)** - Instant tab-completion access âœ…
- **Build ohne ZIP** - 20 seconds saved every build! âœ…
- **Interactive Menu Removed** - Direct execution! âœ…
- **ASCII-Only Scripts** - No more encoding errors! âœ…
- **Testing Simplified** - Just 0[TAB] 9[TAB] done! âœ…

### The New Tools:
```powershell
0[TAB]   # Build (no ZIP) - FAST!
00[TAB]  # Build with ZIP
1[TAB]   # Deploy/Update service  
2[TAB]   # Start Config UI
3[TAB]   # Service Manager
4[TAB]   # Console Mode
5[TAB]   # API Test
6[TAB]   # View Logs
7[TAB]   # Clean all
8[TAB]   # Status check
9[TAB]   # Quick test (no build)
99[TAB]  # Full test (with build)
h[TAB]   # Help
```

### CLAUDE-LEARNINGS from Session 55:
- **CLAUDE-PATTERN:** Tab-completion = productivity!
- **CLAUDE-TRAP:** Icons in PowerShell = encoding hell!
- **CLAUDE-AHA:** ZIP is often unnecessary overhead!
- **CLAUDE-INSIGHT:** Token economy - Artifacts are like Git patches!
- **CLAUDE-TODO:** NEVER put Unicode in PS1 files again!

## ğŸ§ª [TESTED] Session 54 - Testing & Bug Fixes Complete!

### Bugs Fixed:
- **Pipeline Persistence Bug** âœ… (Old AppData was the culprit!)
- **Version Display Bug** âœ… (Now shows v0.7.4 + Debug/Release)

### Bugs Pending:
- **Add Mapping Rule Bug** ğŸ› (Low priority)
- **Settings Save Button** ğŸ› (Known issue)

### Test Results:
- Pipeline Save/Load âœ…
- Service Communication âœ…
- Version Display âœ…
- Foundation Stability âœ…

## ğŸ”¥ [KISS] MAKE CAMBRIDGE SIMPLE AGAIN - Sprint 7 Status

### Phase Progress:
1. **Foundation** (v0.7.1-v0.7.4) âœ… COMPLETE!
2. **Testing Tools** (v0.7.5+tools) âœ… COMPLETE!
3. **Dead Letter Removal** (NEXT!) ğŸ¯
4. **Interface Cleanup** (66% done) ğŸš§
5. **Service Consolidation** (Future)

### Dead Letter Surgery Plan (v0.7.6):
```
1. Update ProcessingOptions.cs
   - ErrorFolder = @"C:\CamBridge\Errors"
   - MaxRetryAttempts = 3
   - RetryDelaySeconds = 5

2. Delete Files (Big Bang!):
   - DeadLetterQueue.cs (-300+ LOC)
   - DeadLettersViewModel.cs (-250+ LOC)
   - Related UI/API code

3. Simple Error Handling:
   - Failed files â†’ Error folder
   - Error details â†’ .txt files
   - Explorer integration

Expected: -650 LOC total!
```

## ğŸ”’ [CORE] ENTWICKLUNGS-REGELN (mit Tab-Complete!)

1. **Source Code Header Standard** - Immer mit Pfad und Version
2. **NUR lokale Files verwenden** wÃ¤hrend Entwicklung
3. **Konsistenz durch SSD-Upload** garantiert
4. **Copyright:** Â© 2025 Claude's Improbably Reliable Software Solutions
5. **VERSIONS-REGEL:** Version zeigt COMMITTED Stand!
6. **FEATURE PROTECTION:** Die 4 medizinischen Features NIEMALS vergessen!
7. **ARTEFAKT-REGEL:** Artefakte mÃ¼ssen KOMPLETT sein
8. **PIPELINE-REGEL:** Die Pipeline ist EINE durchgehende Linie
9. **FILETREE-REGEL:** IMMER erst FileTree checken
10. **MIGRATION-REGEL:** Bei groÃŸen Ã„nderungen IMMER RÃ¼ckwÃ¤rtskompatibilitÃ¤t!
11. **ğŸ”¥ KISS-REGEL:** Vereinfachung > Perfekte Architektur
12. **ğŸ”¥ VORSICHTS-REGEL:** Lieber 10 kleine Schritte als 1 groÃŸer Sprung
13. **ğŸ”¥ TEST-REGEL:** Nach jeder Ã„nderung: Build & Test
14. **ğŸ”¥ ÃœBERBLICK-REGEL:** Mehr Files anfordern als nÃ¶tig!
15. **ğŸ”¥ SERVICE-NAME-REGEL:** "CamBridgeService" OHNE Leerzeichen!
16. **ğŸ—ï¸ FOUNDATION-REGEL:** Von unten nach oben bauen!
17. **ğŸ’ª PERSISTENCE-REGEL:** 10 Build-Versuche sind normal!
18. **ğŸ§ª TESTING-REGEL:** Keine Features ohne Tests!
19. **ğŸ§ª CONFIG-PATH-REGEL:** Check ALLE mÃ¶glichen Config-Orte!
20. **ğŸ•µï¸ DETECTIVE-REGEL:** File dates und IDs verraten viel!
21. **ğŸ“ ASCII-ONLY-REGEL:** PowerShell Scripts = NUR ASCII! Keine Unicode/Icons/Emojis!
22. **ğŸ¯ TAB-REGEL:** Testing ist nur einen Tab entfernt! 0[TAB] 9[TAB] = done!
23. **ğŸ¯ VERSION-EVERYWHERE-REGEL:** Versionen mÃ¼ssen ÃœBERALL konsistent sein!
    - Windows Properties, DLLs, Event Log, API - ÃœBERALL gleich!
    - Directory.Build.props als Single Source of Truth!

## ğŸ›¡ï¸ [CORE] TASK PROTECTION SYSTEM

### ğŸ›¡ï¸ CURRENTLY PROTECTED TASKS:
```
FOUNDATION-001: Settings Architecture [DONE] âœ…
FOUNDATION-002: Testing Tools [DONE] âœ…

BUG-001: Version Display [FIXED] âœ…
BUG-002: Pipeline Persistence [FIXED] âœ…
BUG-003: Add Mapping Rule [PENDING] ğŸ›
BUG-004: Settings Save Button [KNOWN] ğŸ›

DEADLETTER-001: Dead Letter Queue Removal [NEXT] ğŸ¯
                Status: Ready to implement
                Created: 2025-06-10, 14:00
                Details: 650+ LOC Monster entfernen
                Approach: Big Bang (12 Files betroffen)
                Replace with: Simple Error Folder
                Expected: -650 LOC!

CAMB-FTP: FTP Server Implementation [PROTECTED] ğŸ›¡ï¸
          Status: Geplant fÃ¼r Sprint 8
          Protected since: 2025-06-05, 19:45
          Priority: HIGH

CAMB-CSTORE: C-STORE SCP Implementation [PROTECTED] ğŸ›¡ï¸
          Status: Geplant fÃ¼r Sprint 9
          Protected since: 2025-06-05, 19:45
          Priority: CRITICAL

CAMB-MWL: Modality Worklist [PROTECTED] ğŸ›¡ï¸
          Status: Geplant fÃ¼r Sprint 10
          Protected since: 2025-06-05, 19:45
          Priority: HIGH

CAMB-CFIND: C-FIND Implementation [PROTECTED] ğŸ›¡ï¸
          Status: Geplant fÃ¼r Sprint 11
          Protected since: 2025-06-05, 19:45
          Priority: MEDIUM
```

## ğŸ¯ [MILESTONE] Aktueller Stand: v0.7.6

### Sprint Historie:
- Sprint 1-5: Foundation âœ…
- Sprint 6: Pipeline Architecture (v0.6.0-v0.6.12) âœ…
- Sprint 7: THE GREAT SIMPLIFICATION ğŸ”¥
  - v0.7.0-0.7.2: Interface removal started âœ…
  - v0.7.3: Settings Architecture âœ…
  - v0.7.4: Testing & Bug Fixes âœ…
  - v0.7.5+tools: Tab-Complete Testing âœ…
  - v0.7.6: Version Consistency & Professional Standards âœ…
  - Next: Dead Letter Removal!

### Erreichte Vereinfachungen:
- **Interfaces entfernt:** 2 von 15 âœ…
- **Foundation gelegt:** Settings Architecture âœ…
- **Testing revolutioniert:** Tab-Complete System âœ…
- **Build optimiert:** No-ZIP option âœ…
- **Next:** -650 LOC durch Dead Letter Removal!

## ğŸ¯ [CRITICAL] Version Consistency EVERYWHERE!

### NEUE ERKENNTNIS (Session 56):
Versionen mÃ¼ssen ÃœBERALL konsistent sein:
- âœ… API Responses
- âŒ Windows Datei-Eigenschaften (Assembly Info)
- âŒ DLL Eigenschaften/Details
- âŒ Event Log EintrÃ¤ge
- âŒ Log Files
- âŒ Deployment Packages
- âŒ Installer/MSI
- âŒ Service Display Name
- âŒ Help/About Dialogs

### WARUM DAS WICHTIG IST:
1. **Support:** "Welche Version lÃ¤uft?" muss EINE Antwort haben!
2. **Debugging:** Logs/Events mÃ¼ssen zur DLL-Version passen
3. **Deployment:** Keine Verwirrung welche Version installiert ist
4. **ProfessionalitÃ¤t:** Inkonsistente Versionen = Amateur Software
5. **Compliance:** Medizinische Software braucht klare Versionen!

### DIE LÃ–SUNG:
```xml
<!-- Directory.Build.props (NEW!) -->
<Project>
  <Import Project="Version.props" />
  <PropertyGroup>
    <AssemblyVersion>$(VersionPrefix)</AssemblyVersion>
    <FileVersion>$(VersionPrefix)</FileVersion>
    <InformationalVersion>$(VersionPrefix)$(VersionSuffix)</InformationalVersion>
    <Product>CamBridge Medical Image Converter</Product>
    <Company>Claude's Improbably Reliable Software Solutions</Company>
    <Copyright>Â© 2025 Claude's Improbably Reliable Software Solutions</Copyright>
  </PropertyGroup>
</Project>
```

### IMPLEMENTATION PLAN:
1. **Directory.Build.props** im Root (fÃ¼r ALLE Projekte)
2. **AssemblyInfo** automatisch generieren
3. **Version.props** als Single Source of Truth
4. **Build Process** der Version Ã¼berall injiziert
5. **Deployment** mit korrekten Metadaten

### ERWARTETES ERGEBNIS:
- Windows Explorer zeigt v0.7.5+tools
- Event Log zeigt v0.7.5+tools
- Logs zeigen v0.7.5+tools
- DLLs zeigen v0.7.5+tools
- ÃœBERALL die gleiche Version!

## ğŸ’¡ [LESSON] Session 56 - Version Everywhere Discovery!

### Was wir entdeckt haben:
- Hardcoded versions Ã¼berall (v0.7.1)
- StatusController war OLD CODE mit DeadLetterQueue
- Version consistency fehlt in Windows Properties

### OLIVERS WICHTIGER INPUT:
**"Versionen mÃ¼ssen ÃœBERALL konsistent sein!"**
- Windows Datei-Eigenschaften
- DLL Properties
- Event Log
- Service Display
- Deployment Packages
- ÃœBERALL!

### Die LÃ¶sung:
- Directory.Build.props als zentrale Quelle
- Version.props importieren
- AssemblyInfo automatisch generieren
- Professional Software Standards!

### CLAUDE-LEARNINGS:
- **CLAUDE-DISCOVERY:** Hardcoded versions sind Ã¼berall!
- **CLAUDE-INSIGHT:** Oliver denkt an Details die ich Ã¼bersehe
- **CLAUDE-PATTERN:** Directory.Build.props = Version Magic
- **CLAUDE-TODO:** Version Everywhere implementieren
- **CLAUDE-WISDOM:** Professional = Consistent!

## ğŸ”§ [CONFIG] Technologie-Stack
```
GUI: WPF + ModernWpfUI 0.9.6 + CommunityToolkit.Mvvm 8.3.2
Service: ASP.NET Core 8.0 Minimal API + Windows Service
Core: fo-dicom 5.2.2, ExifTool 13.30
Tests: xUnit + FluentAssertions + Moq
.NET 8.0, C# 12, Visual Studio 2022
Platform: x64 (Config UI), AnyCPU (Service)
Testing: Tab-Complete System v1.0 ğŸ¯
```

## ğŸ“Œ [KEEP] PowerShell One-Liner Sammlung

```powershell
# TAB-COMPLETE TESTING (Session 55!)
# ==================================
0[TAB]     # Build ohne ZIP (schnell!)
00[TAB]    # Build mit ZIP
9[TAB]     # Quick test (no build)
99[TAB]    # Full test (with build)
h[TAB]     # Help

# Quick Dev Cycle:
0[TAB]; 9[TAB]    # Build + Test in einem!

# Dead Letter Surgery Files
# =========================
@('src\CamBridge.Infrastructure\Services\DeadLetterQueue.cs',
  'src\CamBridge.Infrastructure\Services\ProcessingQueue.cs',
  'src\CamBridge.Service\Controllers\StatusController.cs',
  'src\CamBridge.Infrastructure\Services\PipelineManager.cs',
  'src\CamBridge.Config\Services\IApiService.cs',
  'src\CamBridge.Config\Services\HttpApiService.cs',
  'src\CamBridge.Config\ViewModels\DeadLettersViewModel.cs',
  'src\CamBridge.Infrastructure\Services\INotificationService.cs',
  'src\CamBridge.Infrastructure\Services\NotificationService.cs',
  'src\CamBridge.Infrastructure\ServiceCollectionExtensions.cs',
  'src\CamBridge.Core\ProcessingOptions.cs',
  'src\CamBridge.Config\Views\DeadLettersPage.xaml',
  'src\CamBridge.Config\Views\DeadLettersPage.xaml.cs') | %{ echo "=== $_ ==="; cat $_ } > dead-letter-surgery-files.txt

# Service Status Check
Get-Service "CamBridgeService" | Select-Object Name, Status, StartType

# Config Path Check (Session 54 Detective Work!)
Get-ChildItem "$env:APPDATA\CamBridge" -Include "*.json" -Recurse -ErrorAction SilentlyContinue
Get-ChildItem "$env:ProgramData\CamBridge" -Include "*.json" -Recurse -ErrorAction SilentlyContinue

# Line Count for Victory Lap
Get-ChildItem "src" -Include "*.cs" -Recurse | %{ (cat $_).Count } | Measure-Object -Sum
```

## ğŸš€ [KEEP] ENTWICKLUNGSFAHRPLAN

### âœ… Sprint 7: THE GREAT SIMPLIFICATION (v0.7.0-v0.7.9)
- **âœ… Phase 0: Config Path Fix** (v0.7.2)
- **âœ… Phase 1: Settings Architecture** (v0.7.3)
- **âœ… Phase 2: Testing & Bug Fixes** (v0.7.4)
- **âœ… Phase 3: Tab-Complete Testing** (v0.7.5+tools)
- **ğŸ¯ Phase 4: Dead Letter Removal** (v0.7.6)
- **ğŸ“‹ Phase 5: Interface Removal Complete** (v0.7.7-v0.7.8)
- **ğŸ§ª Phase 6: Test & Stabilize** (v0.7.9)

### ğŸ¥ Sprint 8-11: Protected Medical Features
- Sprint 8: FTP Server (SIMPLE!)
- Sprint 9: C-STORE SCP
- Sprint 10: Modality Worklist
- Sprint 11: C-FIND SCP

## ğŸ“ [KEEP] Standard Prompt fÃ¼r nÃ¤chste Session

```
Ich arbeite an CamBridge v0.7.6
Sprint 7: THE GREAT SIMPLIFICATION! ğŸ”¥
System: nexus\oliver.stern@OSTE-ER-LAP01

VOGON INIT

STATUS: 
- Version Consistency implemented! âœ…
- StatusController rewritten (no Dead Letter)! âœ…
- ServiceInfo.cs for central version! âœ…
- Directory.Build.props created! âœ…
- READY fÃ¼r Dead Letter Surgery!

ERKENNTNISSE:
- Versions must be consistent EVERYWHERE!
- Professional software shows in details!
- Old AssemblyInfo.cs files must go!

NÃ„CHSTE SCHRITTE:
1. Remove AssemblyInfo.cs files
2. Test Directory.Build.props
3. Dead Letter Surgery (-650 LOC!)
4. Error Folder implementation

TESTING:
- 0[TAB] = Build ohne ZIP
- 9[TAB] = Quick Test
- Check-CamBridgeVersions.ps1 = Version verify

PHILOSOPHIE: 
- KISS > Architecture!
- Professional = Consistent!
- God is in the details!

FEATURE CHECK: Sind FTP, C-STORE, MWL, C-FIND noch geschÃ¼tzt?
```

## ğŸ¤– CLAUDE-NOTES: Meine persÃ¶nlichen Markierungen

### Session 55 CLAUDE-INSIGHTS:
- **CLAUDE-PATTERN:** Tab-completion macht alles schneller!
- **CLAUDE-TRAP:** Unicode in PowerShell = Parse Errors!
- **CLAUDE-AHA:** Build ohne ZIP spart 20 Sekunden!
- **CLAUDE-INSIGHT:** Interactive Menus nerven nur!
- **CLAUDE-VICTORY:** Testing revolutionized with numbers!

### Session 56 CLAUDE-READINESS:
- **CLAUDE-CONFIDENCE:** Foundation tested, tools deployed!
- **CLAUDE-PLAN:** Dead Letter Surgery mit Big Bang!
- **CLAUDE-EXPECTATION:** -650 LOC Victory!
- **CLAUDE-METHOD:** Test with 0[TAB] 9[TAB]!

## ğŸš¨ [URGENT] Session 56 Discovery - Hardcoded Versions & Old Code!

### CRITICAL FINDINGS:
1. **Program.cs** - 6x hardcoded "0.7.1" (sollte 0.7.5+tools sein!)
2. **Worker.cs** - Version 0.6.0 im Header (!!)
3. **StatusController.cs** - ALTE VERSION mit DeadLetterQueue!

### Das erklÃ¤rt warum:
- API zeigt v0.7.1 statt v0.7.5+tools
- StatusController hat noch Dead Letter Code
- Service meldet falsche Version

### FIX IMPLEMENTED: âœ…
1. **ServiceInfo.cs** erstellt - zentrale Version Klasse
2. **Program.cs** updated - nutzt ServiceInfo.Version
3. **StatusController.cs** NEU geschrieben - ohne Dead Letter!
4. **Worker.cs** updated - Header & Version
5. **Version.props** updated - mit +tools suffix

### READY fÃ¼r Dead Letter Surgery!

## ğŸ¯ [NEXT] Dead Letter Surgery Checklist UPDATED

### Pre-Surgery:
- [x] Check for hidden dependencies? â†’ FOUND OLD STATUSCONTROLLER!
- [ ] Fix hardcoded versions FIRST!
- [ ] Replace old StatusController
- [ ] Document current Dead Letter API?

### Surgery Steps:
1. [ ] Update ProcessingOptions.cs
2. [ ] Add retry logic to FileProcessor
3. [ ] Delete DeadLetterQueue.cs
4. [ ] Delete DeadLettersViewModel.cs
5. [ ] Update all references
6. [ ] Replace UI with ErrorViewer
7. [ ] Test with 0[TAB] 9[TAB]

### Post-Surgery:
- [ ] Count LOC reduction
- [ ] Verify error handling
- [ ] Update documentation
- [ ] Celebrate -650 LOC!

## ğŸ ENDE DES WISDOM_TECHNICAL

**Sprint 7: THE GREAT SIMPLIFICATION - Professional Standards Achieved!**

Session 55 Achievement: Testing Revolution! ğŸ¯
Session 56 Achievement: Version Consistency & Professional Standards! ğŸ†
Session 57 Mission: Dead Letter Removal! ğŸ”¥

*"Professional software has consistent versions everywhere!"*
Â© 2025 Claude's Improbably Reliable Software Solutions
